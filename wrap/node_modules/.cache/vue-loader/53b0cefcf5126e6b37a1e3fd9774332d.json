{"remainingRequest":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\code2\\sh_19_0722\\code-work\\layout\\src\\pages\\ele-goods\\ele-goods.vue?vue&type=style&index=0&id=2bdd0f2a&scoped=true&lang=stylus&","dependencies":[{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\src\\pages\\ele-goods\\ele-goods.vue","mtime":1576485554945},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICIuLi8uLi9jb21tb24vc3R5bHVzL21peGluLnN0eWwiCi5nb29kcwogICAgZGlzcGxheSBmbGV4CiAgICBwb3NpdGlvbiBhYnNvbHV0ZQogICAgbGVmdCAwCiAgICByaWdodCAwCiAgICB0b3AgMTc0cHgKICAgIGJvdHRvbSA0OHB4CiAgICBvdmVyZmxvdyBoaWRkZW4KICAgIC5tZW51LXdyYXAKICAgICAgICBmbGV4IDAgMCA4MHB4CiAgICAgICAgLm1lbnUtbGlzdAogICAgICAgICAgICAubWVudS1pdGVtCiAgICAgICAgICAgICAgICBvbmUtcHgocmdiYSg3LDE3LDI3LDAuMSkpCiAgICAgICAgICAgICAgICBkaXNwbGF5IGZsZXgKICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zIGNlbnRlcgogICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50IGNlbnRlcgogICAgICAgICAgICAgICAgd2lkdGggMTAwJQogICAgICAgICAgICAgICAgaGVpZ2h0IDU0cHgKICAgICAgICAgICAgICAgIGJhY2tncm91bmQgI2YzZjVmNwogICAgICAgICAgICAgICAgJjo6YWZ0ZXIKICAgICAgICAgICAgICAgICAgICB3aWR0aCA1NnB4CiAgICAgICAgICAgICAgICAmLmFjdGl2ZQogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQgcGluawogICAgICAgICAgICAgICAgLmljb24KICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQgMnB4CiAgICAgICAgICAgICAgICAudGV4dAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZSAxMnB4CiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQgMTRweAogICAgICAgICAgICAgICAgICAgIGNvbG9yIHJnYmEoNywxNywyNywxKQogICAgLmZvb2RzLXdyYXAKICAgICAgICBmbGV4IDEKICAgICAgICAuZm9vZHMtbGlzdAogICAgICAgICAgICAuZm9vZHMtaXRlbQogICAgICAgICAgICAgICAgLnRpdGxlCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0IDI2cHgKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kICNmM2Y1ZjcKICAgICAgICAgICAgICAgICAgICBmb250LXNpemUgMTJweAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0IDI2cHgKICAgICAgICAgICAgICAgICAgICBjb2xvciByZ2JhKDE0NywxNTMsMTU5LDEpCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQgNHB4IHNvbGlkICNkOWRkZTEKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQgMTRweAogICAgICAgICAgICAgICAgLmZvb2QtbGlzdAogICAgICAgICAgICAgICAgICAgIC5mb29kLWl0ZW0KICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gcmVsYXRpdmUKICAgICAgICAgICAgICAgICAgICAgICAgb25lLXB4KHJnYmEoNywxNywyNywwLjMpKQogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nIDE4cHgKICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheSBmbGV4CiAgICAgICAgICAgICAgICAgICAgICAgICY6YWZ0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoIDg4JQogICAgICAgICAgICAgICAgICAgICAgICAubGVmdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleCAwIDAgODBweAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0IDEwcHgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoIDEwMCUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgOTMlCiAgICAgICAgICAgICAgICAgICAgICAgIC5yaWdodAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleCAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZSAxNHB4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQgMTRweAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yIHJnYmEoNywxNywyNywxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3AgMnB4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbSA4cHgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kZXNjcmlwdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZSAxMHB4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQgMTBweAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yIHJnYmEoMTQ3LDE1MywxNTksMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vdGhlcnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemUgMTRweAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0IDE0cHgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvciByZ2JhKDE0NywxNTMsMTU5LDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcCA4cHgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tIDhweAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByaWNlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5ub3dQcmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQgOHB4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZSAxNHB4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yIHJnYmEoMjQwLDIwLDIwLDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0IDI0cHgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQgNzAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9sZFByaWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZSAxMHB4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yIHJnYmEoMjQwLDIwLDIwLDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0IDI0cHgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQgNzAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbiBsaW5lLXRocm91Z2gKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29udHJvbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uIGFic29sdXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQgMThweAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbSAxOHB4Cg=="},{"version":3,"sources":["ele-goods.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ele-goods.vue","sourceRoot":"src/pages/ele-goods","sourcesContent":["<template>\r\n    <div class=\"goods\">\r\n        <div class=\"menu-wrap\" ref=\"menuWrap\">\r\n            <ul class=\"menu-list\" ref=\"menuList\">\r\n                <li v-for=\"(good,index) in goods\" class=\"menu-item\"\r\n                    :class=\"{active:currentIndex === index}\" @click=\"handleCForMenuList(index)\">\r\n                    <ele-icon class=\"icon\" :size=\"3\" :type=\"good.type\" v-show=\"good.type >= 0\"></ele-icon>\r\n                    <span class=\"text\">{{good.name}}</span>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"foods-wrap\" ref=\"foodsWrap\">\r\n            <ul class=\"foods-list\" ref=\"foodsList\">\r\n                <li class=\"foods-item\" v-for=\"(good,goodIndex) in goods\">\r\n                    <h2 class=\"title\">{{good.name}}</h2>\r\n                    <ul class=\"food-list\">\r\n                        <li class=\"food-item\" v-for=\"(food,foodIndex) in good.foods\" >\r\n                            <div class=\"left\">\r\n                                <img :src=\"food.icon\">\r\n                            </div>\r\n                            <div class=\"right\">\r\n                                <div class=\"name\">{{food.name}}</div>\r\n                                <div class=\"description\">{{food.description}}</div>\r\n                                <div class=\"others\">\r\n                                    <span class=\"sellCount\">月售{{food.sellCount}}份</span>\r\n                                    <span class=\"rating\">好评率{{food.rating}}%</span>\r\n                                </div>\r\n                                <div class=\"prices\">\r\n                                    <span class=\"nowPrice\">¥{{food.price}}</span>\r\n                                    <span class=\"oldPrice\" v-show=\"food.oldPrice\">¥{{food.oldPrice}}</span>\r\n                                </div>\r\n                                <ele-control :food=\"food\" class=\"control\"\r\n                                    @addCount=\"addCount\"  @removeCount=\"removeCount\"\r\n                                    :goodIndex=\"goodIndex\" :foodIndex=\"foodIndex\"></ele-control>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <ele-cart :deliveryPrice=\"seller.deliveryPrice\" :selectedFoods=\"selectedFoods\"></ele-cart>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import BScroll from 'better-scroll'\r\n    import icon from \"components/ele-icon/ele-icon\"\r\n    import control from \"components/ele-control/ele-contorl\"\r\n    import cart from \"components/ele-cart/ele-cart.vue\"\r\n    const OK = 0;\r\n    export default {\r\n        name: \"ele-goods\",\r\n        props:{\r\n            seller:Object\r\n        },\r\n        data(){\r\n          return{\r\n              goods:[],\r\n              scrollY:0,\r\n              tops:[]\r\n          }\r\n        },\r\n        computed:{\r\n            selectedFoods(){\r\n              let selectedFoods = [];\r\n              this.goods.forEach((good)=>{\r\n                  good.foods.forEach((food)=>{\r\n                      if(food.count > 0){\r\n                          selectedFoods.push(food)\r\n                      }\r\n                  })\r\n              })\r\n              return selectedFoods;\r\n            },\r\n            currentIndex(){\r\n                //依赖于右侧列表的滑动位置\r\n                let {tops,scrollY} = this;\r\n                let index =tops.findIndex((top,index)=>{\r\n                    return scrollY >=top && scrollY < tops[index+1]\r\n                })\r\n\r\n                //左侧列表到置顶\r\n                if(index !== this.oldindex){\r\n                    this.oldindex = index;\r\n                    var liNode = this.$refs.menuList.children[index];\r\n                    this.menuScroll.scrollToElement(liNode,300)\r\n                }\r\n                return index\r\n            }\r\n        },\r\n        components:{\r\n            \"ele-icon\":icon,\r\n            \"ele-control\":control,\r\n            \"ele-cart\":cart\r\n        },\r\n        methods:{\r\n            addCount(goodIndex,foodIndex){\r\n                let food = this.goods.find( (good,index)=> index === goodIndex )\r\n                    .foods.find((food,index) => index ===  foodIndex);\r\n\r\n                if(!food.count){\r\n                    this.$set(food,\"count\",1)\r\n                }else {\r\n                    food.count++\r\n                }\r\n            },\r\n            removeCount(goodIndex,foodIndex){\r\n                let food = this.goods.find( (good,index)=> index === goodIndex )\r\n                    .foods.find((food,index) => index ===  foodIndex);\r\n                if(food.count > 0){\r\n                    food.count--\r\n                }\r\n            },\r\n            handleCForMenuList(index){\r\n                const top = this.tops[index];\r\n                this.foodsScroll.scrollTo(0,-top,300)\r\n            },\r\n            _initScroll(){\r\n                this.menuScroll = new BScroll(this.$refs.menuWrap,{\r\n                    click:true\r\n                })\r\n                this.foodsScroll = new BScroll(this.$refs.foodsWrap,{\r\n                    click:true,\r\n                    probeType:3\r\n                })\r\n                this.foodsScroll.on(\"scroll\",({x,y})=>{\r\n                    this.scrollY = Math.abs(y)\r\n                })\r\n            },\r\n            _initTops(){\r\n                let liNodes = this.$refs.foodsList.children;\r\n                let top = 0;\r\n                let tops = [top];\r\n                Array.from(liNodes).forEach((liNode)=>{\r\n                    top += liNode.offsetHeight;\r\n                    tops.push(top)\r\n                })\r\n                this.tops = tops;\r\n            }\r\n        },\r\n        async mounted(){\r\n            const  {errno,body} = await this.$http.goods.getGoods()\r\n            if(errno === OK){\r\n                this.goods = body\r\n            }\r\n            //滑屏\r\n            this._initScroll();\r\n            this.$nextTick(()=>{\r\n                this._initTops()\r\n            })\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"stylus\">\r\n    @import \"../../common/stylus/mixin.styl\"\r\n    .goods\r\n        display flex\r\n        position absolute\r\n        left 0\r\n        right 0\r\n        top 174px\r\n        bottom 48px\r\n        overflow hidden\r\n        .menu-wrap\r\n            flex 0 0 80px\r\n            .menu-list\r\n                .menu-item\r\n                    one-px(rgba(7,17,27,0.1))\r\n                    display flex\r\n                    align-items center\r\n                    justify-content center\r\n                    width 100%\r\n                    height 54px\r\n                    background #f3f5f7\r\n                    &::after\r\n                        width 56px\r\n                    &.active\r\n                        background pink\r\n                    .icon\r\n                        margin-right 2px\r\n                    .text\r\n                        font-size 12px\r\n                        line-height 14px\r\n                        color rgba(7,17,27,1)\r\n        .foods-wrap\r\n            flex 1\r\n            .foods-list\r\n                .foods-item\r\n                    .title\r\n                        height 26px\r\n                        background #f3f5f7\r\n                        font-size 12px\r\n                        line-height 26px\r\n                        color rgba(147,153,159,1)\r\n                        border-left 4px solid #d9dde1\r\n                        padding-left 14px\r\n                    .food-list\r\n                        .food-item\r\n                            position relative\r\n                            one-px(rgba(7,17,27,0.3))\r\n                            padding 18px\r\n                            display flex\r\n                            &:after\r\n                                width 88%\r\n                            .left\r\n                                flex 0 0 80px\r\n                                margin-right 10px\r\n                                img\r\n                                    width 100%\r\n                                    height 93%\r\n                            .right\r\n                                flex 1\r\n                                .name\r\n                                    font-size 14px\r\n                                    line-height 14px\r\n                                    color rgba(7,17,27,1)\r\n                                    margin-top 2px\r\n                                    margin-bottom 8px\r\n                                .description\r\n                                    font-size 10px\r\n                                    line-height 10px\r\n                                    color rgba(147,153,159,1)\r\n                                .others\r\n                                    font-size 14px\r\n                                    line-height 14px\r\n                                    color rgba(147,153,159,1)\r\n                                    margin-top 8px\r\n                                    margin-bottom 8px\r\n                                .prices\r\n                                    .nowPrice\r\n                                        margin-right 8px\r\n                                        font-size 14px\r\n                                        color rgba(240,20,20,1)\r\n                                        line-height 24px\r\n                                        font-weight 700\r\n                                    .oldPrice\r\n                                        font-size 10px\r\n                                        color rgba(240,20,20,1)\r\n                                        line-height 24px\r\n                                        font-weight 700\r\n                                        text-decoration line-through\r\n\r\n                                .control\r\n                                    position absolute\r\n                                    right 18px\r\n                                    bottom 18px\r\n</style>"]}]}