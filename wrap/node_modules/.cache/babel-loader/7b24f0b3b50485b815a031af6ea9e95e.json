{"remainingRequest":"D:\\code\\code2\\sh_19_0722\\code-work\\wrap\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\code2\\sh_19_0722\\code-work\\wrap\\src\\api\\util\\index.js","dependencies":[{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\wrap\\src\\api\\util\\index.js","mtime":1576657976836},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\wrap\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\wrap\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfdHlwZW9mIGZyb20gIkQ6XFxjb2RlXFxjb2RlMlxcc2hfMTlfMDcyMlxcY29kZS13b3JrXFx3cmFwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoYXhpb3NJbnN0YW5jZSwgaW50ZXJmYWNlT2JqKSB7CiAgdmFyIGFwaSA9IHt9OwoKICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHsKICAgIHZhciBfaW50ZXJmYWNlT2JqJG5hbWUgPSBpbnRlcmZhY2VPYmpbbmFtZV0sCiAgICAgICAgdXJsID0gX2ludGVyZmFjZU9iaiRuYW1lLnVybCwKICAgICAgICBtZXRob2QgPSBfaW50ZXJmYWNlT2JqJG5hbWUubWV0aG9kLAogICAgICAgIGlzRm9ybSA9IF9pbnRlcmZhY2VPYmokbmFtZS5pc0Zvcm0sCiAgICAgICAgY29yc1VybCA9IF9pbnRlcmZhY2VPYmokbmFtZS5jb3JzVXJsOwoKICAgIGFwaVtuYW1lXSA9IGZ1bmN0aW9uIF9jYWxsZWUoZGF0YSkgewogICAgICB2YXIgY29uZmlnLAogICAgICAgICAgdHJhbnNmb3JtRGF0YSwKICAgICAgICAgIGtleSwKICAgICAgICAgIHJlcywKICAgICAgICAgIGNvbmZpZ0RhdGEsCiAgICAgICAgICBlbmREYXRhLAogICAgICAgICAgX2tleSwKICAgICAgICAgIF9hcmdzID0gYXJndW1lbnRzOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb25maWcgPSBfYXJncy5sZW5ndGggPiAxICYmIF9hcmdzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJnc1sxXSA6IHt9OwogICAgICAgICAgICAgIC8vZGF0YeW/heWumuaYr+S4gOS4qmpz5a+56LGhCiAgICAgICAgICAgICAgLy8g5pWw5o2u6L2s5o2iISEhICDlsIbkvKDlhaXnmoRqc+WvueixoSDmjInpnIDmsYLovazljJbkuLpkYXRhKGpzb24gZm9ybWRhdGEp5oiW6ICFcGFyYW1zCiAgICAgICAgICAgICAgdHJhbnNmb3JtRGF0YSA9IG51bGw7CgogICAgICAgICAgICAgIGlmIChkYXRhICYmIGlzRm9ybSkgewogICAgICAgICAgICAgICAgdHJhbnNmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwoKICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIGRhdGEpIHsKICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtRGF0YS5hcHBlbmQoa2V5LCBkYXRhW2tleV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhID0gZGF0YTsKICAgICAgICAgICAgICB9IC8v6Kej5Yaz6Leo5Z+fCgoKICAgICAgICAgICAgICBpZiAoY29yc1VybCkgewogICAgICAgICAgICAgICAgdXJsID0gY29yc1VybCArIHVybDsKICAgICAgICAgICAgICB9IC8v6K+35rGC55qE5Y+R6YCBISEhCgoKICAgICAgICAgICAgICByZXMgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBtZXRob2Q7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IF9jb250ZXh0LnQwID09PSAiZ2V0IiA/IDggOiBfY29udGV4dC50MCA9PT0gImRlbGV0ZSIgPyA4IDogX2NvbnRleHQudDAgPT09ICJwb3N0IiA/IDEyIDogX2NvbnRleHQudDAgPT09ICJwdXQiID8gMTIgOiAxODsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChheGlvc0luc3RhbmNlKHsKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHRyYW5zZm9ybURhdGEKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAxOCk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNvbmZpZ0RhdGEgPSBjb25maWcgJiYgX3R5cGVvZihjb25maWcuZGF0YSkgPT09ICJvYmplY3QiID8gY29uZmlnLmRhdGEgOiB7fTsKCiAgICAgICAgICAgICAgaWYgKGlzRm9ybSkgewogICAgICAgICAgICAgICAgZm9yIChfa2V5IGluIGNvbmZpZ0RhdGEpIHsKICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtRGF0YS5hcHBlbmQoX2tleSwgY29uZmlnRGF0YVtfa2V5XSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZW5kRGF0YSA9IHRyYW5zZm9ybURhdGE7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVuZERhdGEgPSBPYmplY3QuYXNzaWduKHRyYW5zZm9ybURhdGEsIGNvbmZpZ0RhdGEpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoYXhpb3NJbnN0YW5jZSh7CiAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLAogICAgICAgICAgICAgICAgZGF0YTogZW5kRGF0YQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDE4KTsKCiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzKTsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICB9OwoKICBmb3IgKG5hbWUgaW4gaW50ZXJmYWNlT2JqKSB7CiAgICBfbG9vcCgpOwogIH0KCiAgcmV0dXJuIGFwaTsKfSk7"},{"version":3,"sources":["D:/code/code2/sh_19_0722/code-work/wrap/src/api/util/index.js"],"names":["axiosInstance","interfaceObj","api","name","url","method","isForm","corsUrl","data","config","transformData","FormData","key","append","res","undefined","params","configData","endData","Object","assign"],"mappings":";;;AAAA,gBAAe,UAACA,aAAD,EAAeC,YAAf,EAA8B;AAC3C,MAAMC,GAAG,GAAG,EAAZ;;AAD2C;AAAA,6BAGLD,YAAY,CAACE,IAAD,CAHP;AAAA,QAGlCC,GAHkC,sBAGlCA,GAHkC;AAAA,QAG9BC,MAH8B,sBAG9BA,MAH8B;AAAA,QAGvBC,MAHuB,sBAGvBA,MAHuB;AAAA,QAGhBC,OAHgB,sBAGhBA,OAHgB;;AAKzCL,IAAAA,GAAG,CAACC,IAAD,CAAH,GAAW,iBAAOK,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAYC,cAAAA,MAAZ,2DAAmB,EAAnB;AACT;AACA;AACIC,cAAAA,aAHK,GAGS,IAHT;;AAIT,kBAAGF,IAAI,IAAIF,MAAX,EAAkB;AAChBI,gBAAAA,aAAa,GAAG,IAAIC,QAAJ,EAAhB;;AACA,qBAAQC,GAAR,IAAeJ,IAAf,EAAoB;AAClBE,kBAAAA,aAAa,CAACG,MAAd,CAAqBD,GAArB,EAAyBJ,IAAI,CAACI,GAAD,CAA7B;AACD;AACF,eALD,MAKK;AACHF,gBAAAA,aAAa,GAAGF,IAAhB;AACD,eAXQ,CAaT;;;AACA,kBAAGD,OAAH,EAAW;AACPH,gBAAAA,GAAG,GAAGG,OAAO,GAAGH,GAAhB;AACH,eAhBQ,CAkBT;;;AACIU,cAAAA,GAnBK,GAmBCC,SAnBD;AAAA,4BAoBDV,MApBC;AAAA,8CAqBF,KArBE,uBAsBF,QAtBE,uBA6BF,MA7BE,wBA8BF,KA9BE;AAAA;;AAAA;AAAA;AAAA,8CAuBOL,aAAa,CAAC;AACxBI,gBAAAA,GAAG,EAAHA,GADwB;AAExBC,gBAAAA,MAAM,EAANA,MAFwB;AAGxBW,gBAAAA,MAAM,EAACN;AAHiB,eAAD,CAvBpB;;AAAA;AAuBLI,cAAAA,GAvBK;AAAA;;AAAA;AA+BDG,cAAAA,UA/BC,GA+BaR,MAAM,IAAK,QAAOA,MAAM,CAACD,IAAd,MAAuB,QAAnC,GAA+CC,MAAM,CAACD,IAAtD,GAA6D,EA/BzE;;AAiCL,kBAAGF,MAAH,EAAU;AACR,qBAAQM,IAAR,IAAeK,UAAf,EAA0B;AACxBP,kBAAAA,aAAa,CAACG,MAAd,CAAqBD,IAArB,EAAyBK,UAAU,CAACL,IAAD,CAAnC;AACD;;AACDM,gBAAAA,OAAO,GAAGR,aAAV;AACD,eALD,MAKM;AACJQ,gBAAAA,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAcV,aAAd,EAA4BO,UAA5B,CAAV;AACD;;AAxCI;AAAA,8CAyCOjB,aAAa,CAAC;AACxBI,gBAAAA,GAAG,EAAHA,GADwB;AAExBC,gBAAAA,MAAM,EAANA,MAFwB;AAGxBG,gBAAAA,IAAI,EAACU;AAHmB,eAAD,CAzCpB;;AAAA;AAyCLJ,cAAAA,GAzCK;AAAA;;AAAA;AAAA,+CAiDFA,GAjDE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAX;AALyC;;AAE3C,OAAIX,IAAJ,IAAYF,YAAZ,EAAyB;AAAA;AAsDxB;;AACD,SAAOC,GAAP;AACD,CA1DD","sourcesContent":["export default (axiosInstance,interfaceObj)=>{\n  const api = {};\n  for(name in interfaceObj){\n    const {url,method,isForm,corsUrl} = interfaceObj[name];\n\n    api[name]= async (data,config={}) => {\n      //data必定是一个js对象\n      // 数据转换!!!  将传入的js对象 按需求转化为data(json formdata)或者params\n      let transformData=null;\n      if(data && isForm){\n        transformData = new FormData();\n        for(let key in data){\n          transformData.append(key,data[key])\n        }\n      }else{\n        transformData = data\n      }\n\n      //解决跨域\n      if(corsUrl){\n          url = corsUrl + url;\n      }\n\n      //请求的发送!!!\n      let res = undefined;\n      switch (method){\n        case \"get\":\n        case \"delete\":\n          res = await axiosInstance({\n            url,\n            method,\n            params:transformData\n          });\n          break;\n        case \"post\":\n        case \"put\":\n          let configData = (config && (typeof config.data === \"object\")) ?config.data  :{};\n          let endData ;\n          if(isForm){\n            for(let key in configData){\n              transformData.append(key,configData[key]);\n            }\n            endData = transformData;\n          }else {\n            endData = Object.assign(transformData,configData)\n          }\n          res = await axiosInstance({\n            url,\n            method,\n            data:endData\n          })\n          break;\n      }\n\n      return res;\n    }\n  }\n  return api;\n}\n"]}]}