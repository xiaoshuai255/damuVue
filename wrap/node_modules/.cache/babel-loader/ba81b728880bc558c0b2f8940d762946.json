{"remainingRequest":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\code2\\sh_19_0722\\code-work\\layout\\src\\api\\util\\index.js","dependencies":[{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\src\\api\\util\\index.js","mtime":1575943603947},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfdHlwZW9mIGZyb20gIkQ6XFxjb2RlXFxjb2RlMlxcc2hfMTlfMDcyMlxcY29kZS13b3JrXFxsYXlvdXRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIChheGlvc0luc3RhbmNlLCBpbnRlcmZhY2VPYmopIHsKICB2YXIgYXBpID0ge307CgogIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKCkgewogICAgdmFyIF9pbnRlcmZhY2VPYmokbmFtZSA9IGludGVyZmFjZU9ialtuYW1lXSwKICAgICAgICB1cmwgPSBfaW50ZXJmYWNlT2JqJG5hbWUudXJsLAogICAgICAgIG1ldGhvZCA9IF9pbnRlcmZhY2VPYmokbmFtZS5tZXRob2QsCiAgICAgICAgaXNGb3JtID0gX2ludGVyZmFjZU9iaiRuYW1lLmlzRm9ybTsKCiAgICBhcGlbbmFtZV0gPSBmdW5jdGlvbiBfY2FsbGVlKGRhdGEpIHsKICAgICAgdmFyIGNvbmZpZywKICAgICAgICAgIHRyYW5zZm9ybURhdGEsCiAgICAgICAgICBrZXksCiAgICAgICAgICByZXMsCiAgICAgICAgICBjb25maWdEYXRhLAogICAgICAgICAgZW5kRGF0YSwKICAgICAgICAgIF9rZXksCiAgICAgICAgICBfYXJncyA9IGFyZ3VtZW50czsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29uZmlnID0gX2FyZ3MubGVuZ3RoID4gMSAmJiBfYXJnc1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3NbMV0gOiB7fTsKICAgICAgICAgICAgICAvL2RhdGHlv4XlrprmmK/kuIDkuKpqc+WvueixoQogICAgICAgICAgICAgIC8vIOaVsOaNrui9rOaNoiEhISAg5bCG5Lyg5YWl55qEanPlr7nosaEg5oyJ6ZyA5rGC6L2s5YyW5Li6ZGF0YShqc29uIGZvcm1kYXRhKeaIluiAhXBhcmFtcwogICAgICAgICAgICAgIHRyYW5zZm9ybURhdGEgPSBudWxsOwoKICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBpc0Zvcm0pIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCiAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiBkYXRhKSB7CiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybURhdGEuYXBwZW5kKGtleSwgZGF0YVtrZXldKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdHJhbnNmb3JtRGF0YSA9IGRhdGE7CiAgICAgICAgICAgICAgfSAvL+ivt+axgueahOWPkemAgSEhIQoKCiAgICAgICAgICAgICAgcmVzID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gbWV0aG9kOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSBfY29udGV4dC50MCA9PT0gImdldCIgPyA3IDogX2NvbnRleHQudDAgPT09ICJkZWxldGUiID8gNyA6IF9jb250ZXh0LnQwID09PSAicG9zdCIgPyAxMSA6IF9jb250ZXh0LnQwID09PSAicHV0IiA/IDExIDogMTc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChheGlvc0luc3RhbmNlKHsKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHRyYW5zZm9ybURhdGEKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDE3KTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY29uZmlnRGF0YSA9IGNvbmZpZyAmJiBfdHlwZW9mKGNvbmZpZy5kYXRhKSA9PT0gIm9iamVjdCIgPyBjb25maWcuZGF0YSA6IHt9OwoKICAgICAgICAgICAgICBpZiAoaXNGb3JtKSB7CiAgICAgICAgICAgICAgICBmb3IgKF9rZXkgaW4gY29uZmlnRGF0YSkgewogICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLmFwcGVuZChfa2V5LCBjb25maWdEYXRhW19rZXldKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBlbmREYXRhID0gdHJhbnNmb3JtRGF0YTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZW5kRGF0YSA9IE9iamVjdC5hc3NpZ24odHJhbnNmb3JtRGF0YSwgY29uZmlnRGF0YSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChheGlvc0luc3RhbmNlKHsKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICBkYXRhOiBlbmREYXRhCiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImJyZWFrIiwgMTcpOwoKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXMpOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwogIH07CgogIGZvciAobmFtZSBpbiBpbnRlcmZhY2VPYmopIHsKICAgIF9sb29wKCk7CiAgfQoKICByZXR1cm4gYXBpOwp9KTs="},{"version":3,"sources":["D:/code/code2/sh_19_0722/code-work/layout/src/api/util/index.js"],"names":["axiosInstance","interfaceObj","api","name","url","method","isForm","data","config","transformData","FormData","key","append","res","undefined","params","configData","endData","Object","assign"],"mappings":";;;AAAA,gBAAe,UAACA,aAAD,EAAeC,YAAf,EAA8B;AAC3C,MAAMC,GAAG,GAAG,EAAZ;;AAD2C;AAAA,6BAGbD,YAAY,CAACE,IAAD,CAHC;AAAA,QAGlCC,GAHkC,sBAGlCA,GAHkC;AAAA,QAG9BC,MAH8B,sBAG9BA,MAH8B;AAAA,QAGvBC,MAHuB,sBAGvBA,MAHuB;;AAKzCJ,IAAAA,GAAG,CAACC,IAAD,CAAH,GAAW,iBAAOI,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAYC,cAAAA,MAAZ,2DAAmB,EAAnB;AACT;AACA;AACIC,cAAAA,aAHK,GAGS,IAHT;;AAIT,kBAAGF,IAAI,IAAID,MAAX,EAAkB;AAChBG,gBAAAA,aAAa,GAAG,IAAIC,QAAJ,EAAhB;;AACA,qBAAQC,GAAR,IAAeJ,IAAf,EAAoB;AAClBE,kBAAAA,aAAa,CAACG,MAAd,CAAqBD,GAArB,EAAyBJ,IAAI,CAACI,GAAD,CAA7B;AACD;AACF,eALD,MAKK;AACHF,gBAAAA,aAAa,GAAGF,IAAhB;AACD,eAXQ,CAaT;;;AACIM,cAAAA,GAdK,GAcCC,SAdD;AAAA,4BAeDT,MAfC;AAAA,8CAgBF,KAhBE,uBAiBF,QAjBE,uBAwBF,MAxBE,wBAyBF,KAzBE;AAAA;;AAAA;AAAA;AAAA,8CAkBOL,aAAa,CAAC;AACxBI,gBAAAA,GAAG,EAAHA,GADwB;AAExBC,gBAAAA,MAAM,EAANA,MAFwB;AAGxBU,gBAAAA,MAAM,EAACN;AAHiB,eAAD,CAlBpB;;AAAA;AAkBLI,cAAAA,GAlBK;AAAA;;AAAA;AA0BDG,cAAAA,UA1BC,GA0BaR,MAAM,IAAK,QAAOA,MAAM,CAACD,IAAd,MAAuB,QAAnC,GAA+CC,MAAM,CAACD,IAAtD,GAA6D,EA1BzE;;AA4BL,kBAAGD,MAAH,EAAU;AACR,qBAAQK,IAAR,IAAeK,UAAf,EAA0B;AACxBP,kBAAAA,aAAa,CAACG,MAAd,CAAqBD,IAArB,EAAyBK,UAAU,CAACL,IAAD,CAAnC;AACD;;AACDM,gBAAAA,OAAO,GAAGR,aAAV;AACD,eALD,MAKM;AACJQ,gBAAAA,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAcV,aAAd,EAA4BO,UAA5B,CAAV;AACD;;AAnCI;AAAA,8CAoCOhB,aAAa,CAAC;AACxBI,gBAAAA,GAAG,EAAHA,GADwB;AAExBC,gBAAAA,MAAM,EAANA,MAFwB;AAGxBE,gBAAAA,IAAI,EAACU;AAHmB,eAAD,CApCpB;;AAAA;AAoCLJ,cAAAA,GApCK;AAAA;;AAAA;AAAA,+CA4CFA,GA5CE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAX;AALyC;;AAE3C,OAAIV,IAAJ,IAAYF,YAAZ,EAAyB;AAAA;AAiDxB;;AACD,SAAOC,GAAP;AACD,CArDD","sourcesContent":["export default (axiosInstance,interfaceObj)=>{\n  const api = {};\n  for(name in interfaceObj){\n    const {url,method,isForm} = interfaceObj[name];\n\n    api[name]= async (data,config={}) => {\n      //data必定是一个js对象\n      // 数据转换!!!  将传入的js对象 按需求转化为data(json formdata)或者params\n      let transformData=null;\n      if(data && isForm){\n        transformData = new FormData();\n        for(let key in data){\n          transformData.append(key,data[key])\n        }\n      }else{\n        transformData = data\n      }\n\n      //请求的发送!!!\n      let res = undefined;\n      switch (method){\n        case \"get\":\n        case \"delete\":\n          res = await axiosInstance({\n            url,\n            method,\n            params:transformData\n          });\n          break;\n        case \"post\":\n        case \"put\":\n          let configData = (config && (typeof config.data === \"object\")) ?config.data  :{};\n          let endData ;\n          if(isForm){\n            for(let key in configData){\n              transformData.append(key,configData[key]);\n            }\n            endData = transformData;\n          }else {\n            endData = Object.assign(transformData,configData)\n          }\n          res = await axiosInstance({\n            url,\n            method,\n            data:endData\n          })\n          break;\n      }\n\n      return res;\n    }\n  }\n  return api;\n}\n"]}]}