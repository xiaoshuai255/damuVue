{"remainingRequest":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\code2\\sh_19_0722\\code-work\\layout\\src\\pages\\ele-goods\\ele-goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\src\\pages\\ele-goods\\ele-goods.vue","mtime":1576632131691},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\code2\\sh_19_0722\\code-work\\layout\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBCU2Nyb2xsIGZyb20gJ2JldHRlci1zY3JvbGwnOwppbXBvcnQgaWNvbiBmcm9tICJjb21wb25lbnRzL2VsZS1pY29uL2VsZS1pY29uIjsKaW1wb3J0IGNvbnRyb2wgZnJvbSAiY29tcG9uZW50cy9lbGUtY29udHJvbC9lbGUtY29udG9ybCI7CmltcG9ydCBjYXJ0IGZyb20gImNvbXBvbmVudHMvZWxlLWNhcnQvZWxlLWNhcnQudnVlIjsKdmFyIE9LID0gMDsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJlbGUtZ29vZHMiLAogIHByb3BzOiB7CiAgICBzZWxsZXI6IE9iamVjdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGdvb2RzOiBbXSwKICAgICAgc2Nyb2xsWTogMCwKICAgICAgdG9wczogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgc2VsZWN0ZWRGb29kczogZnVuY3Rpb24gc2VsZWN0ZWRGb29kcygpIHsKICAgICAgdmFyIHNlbGVjdGVkRm9vZHMgPSBbXTsKICAgICAgdGhpcy5nb29kcy5mb3JFYWNoKGZ1bmN0aW9uIChnb29kKSB7CiAgICAgICAgZ29vZC5mb29kcy5mb3JFYWNoKGZ1bmN0aW9uIChmb29kKSB7CiAgICAgICAgICBpZiAoZm9vZC5jb3VudCA+IDApIHsKICAgICAgICAgICAgc2VsZWN0ZWRGb29kcy5wdXNoKGZvb2QpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIHNlbGVjdGVkRm9vZHM7CiAgICB9LAogICAgY3VycmVudEluZGV4OiBmdW5jdGlvbiBjdXJyZW50SW5kZXgoKSB7CiAgICAgIC8v5L6d6LWW5LqO5Y+z5L6n5YiX6KGo55qE5ruR5Yqo5L2N572uCiAgICAgIHZhciB0b3BzID0gdGhpcy50b3BzLAogICAgICAgICAgc2Nyb2xsWSA9IHRoaXMuc2Nyb2xsWTsKICAgICAgdmFyIGluZGV4ID0gdG9wcy5maW5kSW5kZXgoZnVuY3Rpb24gKHRvcCwgaW5kZXgpIHsKICAgICAgICByZXR1cm4gc2Nyb2xsWSA+PSB0b3AgJiYgc2Nyb2xsWSA8IHRvcHNbaW5kZXggKyAxXTsKICAgICAgfSk7IC8v5bem5L6n5YiX6KGo5Yiw572u6aG2CgogICAgICBpZiAoaW5kZXggIT09IHRoaXMub2xkaW5kZXgpIHsKICAgICAgICB0aGlzLm9sZGluZGV4ID0gaW5kZXg7CiAgICAgICAgdmFyIGxpTm9kZSA9IHRoaXMuJHJlZnMubWVudUxpc3QuY2hpbGRyZW5baW5kZXhdOwogICAgICAgIHRoaXMubWVudVNjcm9sbC5zY3JvbGxUb0VsZW1lbnQobGlOb2RlLCAzMDApOwogICAgICB9CgogICAgICByZXR1cm4gaW5kZXg7CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICAiZWxlLWljb24iOiBpY29uLAogICAgImVsZS1jb250cm9sIjogY29udHJvbCwKICAgICJlbGUtY2FydCI6IGNhcnQKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdGhpcy5zZWxlY3RlZEZvb2RzLmZvckVhY2goZnVuY3Rpb24gKHNlbGVjdGVkRm9vZCkgewogICAgICAgIHNlbGVjdGVkRm9vZC5jb3VudCA9IDA7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZENvdW50OiBmdW5jdGlvbiBhZGRDb3VudChmb29kKSB7CiAgICAgIC8qIGxldCBmb29kID0gdGhpcy5nb29kcy5maW5kKCAoZ29vZCxpbmRleCk9PiBpbmRleCA9PT0gZ29vZEluZGV4ICkKICAgICAgICAgICAuZm9vZHMuZmluZCgoZm9vZCxpbmRleCkgPT4gaW5kZXggPT09ICBmb29kSW5kZXgpOyovCiAgICAgIGlmICghZm9vZC5jb3VudCkgewogICAgICAgIHRoaXMuJHNldChmb29kLCAiY291bnQiLCAxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb29kLmNvdW50Kys7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmVDb3VudDogZnVuY3Rpb24gcmVtb3ZlQ291bnQoZ29vZEluZGV4LCBmb29kSW5kZXgpIHsKICAgICAgdmFyIGZvb2QgPSB0aGlzLmdvb2RzLmZpbmQoZnVuY3Rpb24gKGdvb2QsIGluZGV4KSB7CiAgICAgICAgcmV0dXJuIGluZGV4ID09PSBnb29kSW5kZXg7CiAgICAgIH0pLmZvb2RzLmZpbmQoZnVuY3Rpb24gKGZvb2QsIGluZGV4KSB7CiAgICAgICAgcmV0dXJuIGluZGV4ID09PSBmb29kSW5kZXg7CiAgICAgIH0pOwoKICAgICAgaWYgKGZvb2QuY291bnQgPiAwKSB7CiAgICAgICAgZm9vZC5jb3VudC0tOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ0Zvck1lbnVMaXN0OiBmdW5jdGlvbiBoYW5kbGVDRm9yTWVudUxpc3QoaW5kZXgpIHsKICAgICAgdmFyIHRvcCA9IHRoaXMudG9wc1tpbmRleF07CiAgICAgIHRoaXMuZm9vZHNTY3JvbGwuc2Nyb2xsVG8oMCwgLXRvcCwgMzAwKTsKICAgIH0sCiAgICBfaW5pdFNjcm9sbDogZnVuY3Rpb24gX2luaXRTY3JvbGwoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLm1lbnVTY3JvbGwgPSBuZXcgQlNjcm9sbCh0aGlzLiRyZWZzLm1lbnVXcmFwLCB7CiAgICAgICAgY2xpY2s6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuZm9vZHNTY3JvbGwgPSBuZXcgQlNjcm9sbCh0aGlzLiRyZWZzLmZvb2RzV3JhcCwgewogICAgICAgIGNsaWNrOiB0cnVlLAogICAgICAgIHByb2JlVHlwZTogMwogICAgICB9KTsKICAgICAgdGhpcy5mb29kc1Njcm9sbC5vbigic2Nyb2xsIiwgZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgeCA9IF9yZWYueCwKICAgICAgICAgICAgeSA9IF9yZWYueTsKICAgICAgICBfdGhpcy5zY3JvbGxZID0gTWF0aC5hYnMoeSk7CiAgICAgIH0pOwogICAgfSwKICAgIF9pbml0VG9wczogZnVuY3Rpb24gX2luaXRUb3BzKCkgewogICAgICB2YXIgbGlOb2RlcyA9IHRoaXMuJHJlZnMuZm9vZHNMaXN0LmNoaWxkcmVuOwogICAgICB2YXIgdG9wID0gMDsKICAgICAgdmFyIHRvcHMgPSBbdG9wXTsKICAgICAgQXJyYXkuZnJvbShsaU5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChsaU5vZGUpIHsKICAgICAgICB0b3AgKz0gbGlOb2RlLm9mZnNldEhlaWdodDsKICAgICAgICB0b3BzLnB1c2godG9wKTsKICAgICAgfSk7CiAgICAgIHRoaXMudG9wcyA9IHRvcHM7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgdmFyIF9yZWYyLCBlcnJubywgYm9keTsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIG1vdW50ZWQkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLiRodHRwLmdvb2RzLmdldEdvb2RzKCkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgX3JlZjIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBlcnJubyA9IF9yZWYyLmVycm5vOwogICAgICAgICAgICBib2R5ID0gX3JlZjIuYm9keTsKCiAgICAgICAgICAgIGlmIChlcnJubyA9PT0gT0spIHsKICAgICAgICAgICAgICB0aGlzLmdvb2RzID0gYm9keTsKICAgICAgICAgICAgfSAvL+a7keWxjwoKCiAgICAgICAgICAgIHRoaXMuX2luaXRTY3JvbGwoKTsKCiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfdGhpczIuX2luaXRUb3BzKCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBudWxsLCB0aGlzKTsKICB9Cn07"},{"version":3,"sources":["ele-goods.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"goods\">\r\n        <div class=\"menu-wrap\" ref=\"menuWrap\">\r\n            <ul class=\"menu-list\" ref=\"menuList\">\r\n                <li v-for=\"(good,index) in goods\" class=\"menu-item\"\r\n                    :class=\"{active:currentIndex === index}\" @click=\"handleCForMenuList(index)\">\r\n                    <ele-icon class=\"icon\" :size=\"3\" :type=\"good.type\" v-show=\"good.type >= 0\"></ele-icon>\r\n                    <span class=\"text\">{{good.name}}</span>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"foods-wrap\" ref=\"foodsWrap\">\r\n            <ul class=\"foods-list\" ref=\"foodsList\">\r\n                <li class=\"foods-item\" v-for=\"(good,goodIndex) in goods\">\r\n                    <h2 class=\"title\">{{good.name}}</h2>\r\n                    <ul class=\"food-list\">\r\n                        <li class=\"food-item\" v-for=\"(food,foodIndex) in good.foods\" >\r\n                            <div class=\"left\">\r\n                                <img :src=\"food.icon\">\r\n                            </div>\r\n                            <div class=\"right\">\r\n                                <div class=\"name\">{{food.name}}</div>\r\n                                <div class=\"description\">{{food.description}}</div>\r\n                                <div class=\"others\">\r\n                                    <span class=\"sellCount\">月售{{food.sellCount}}份</span>\r\n                                    <span class=\"rating\">好评率{{food.rating}}%</span>\r\n                                </div>\r\n                                <div class=\"prices\">\r\n                                    <span class=\"nowPrice\">¥{{food.price}}</span>\r\n                                    <span class=\"oldPrice\" v-show=\"food.oldPrice\">¥{{food.oldPrice}}</span>\r\n                                </div>\r\n                                <ele-control :food=\"food\" class=\"control\"\r\n                                    @addCount=\"addCount\"  @removeCount=\"removeCount\"\r\n                                    :goodIndex=\"goodIndex\" :foodIndex=\"foodIndex\"></ele-control>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <ele-cart :deliveryPrice=\"seller.deliveryPrice\" :minPrice=\"seller.minPrice\"\r\n                  :selectedFoods=\"selectedFoods\" @clear=\"clear\"></ele-cart>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import BScroll from 'better-scroll'\r\n    import icon from \"components/ele-icon/ele-icon\"\r\n    import control from \"components/ele-control/ele-contorl\"\r\n    import cart from \"components/ele-cart/ele-cart.vue\"\r\n    const OK = 0;\r\n    export default {\r\n        name: \"ele-goods\",\r\n        props:{\r\n            seller:Object\r\n        },\r\n        data(){\r\n          return{\r\n              goods:[],\r\n              scrollY:0,\r\n              tops:[]\r\n          }\r\n        },\r\n        computed:{\r\n            selectedFoods(){\r\n              let selectedFoods = [];\r\n              this.goods.forEach((good)=>{\r\n                  good.foods.forEach((food)=>{\r\n                      if(food.count > 0){\r\n                          selectedFoods.push(food)\r\n                      }\r\n                  })\r\n              })\r\n              return selectedFoods;\r\n            },\r\n            currentIndex(){\r\n                //依赖于右侧列表的滑动位置\r\n                let {tops,scrollY} = this;\r\n                let index =tops.findIndex((top,index)=>{\r\n                    return scrollY >=top && scrollY < tops[index+1]\r\n                })\r\n\r\n                //左侧列表到置顶\r\n                if(index !== this.oldindex){\r\n                    this.oldindex = index;\r\n                    var liNode = this.$refs.menuList.children[index];\r\n                    this.menuScroll.scrollToElement(liNode,300)\r\n                }\r\n                return index\r\n            }\r\n        },\r\n        components:{\r\n            \"ele-icon\":icon,\r\n            \"ele-control\":control,\r\n            \"ele-cart\":cart\r\n        },\r\n        methods:{\r\n            clear(){\r\n                this.selectedFoods.forEach((selectedFood)=>{\r\n                    selectedFood.count = 0;\r\n                })\r\n            },\r\n            addCount(food){\r\n               /* let food = this.goods.find( (good,index)=> index === goodIndex )\r\n                    .foods.find((food,index) => index ===  foodIndex);*/\r\n\r\n                if(!food.count){\r\n                    this.$set(food,\"count\",1)\r\n                }else {\r\n                    food.count++\r\n                }\r\n            },\r\n            removeCount(goodIndex,foodIndex){\r\n                let food = this.goods.find( (good,index)=> index === goodIndex )\r\n                    .foods.find((food,index) => index ===  foodIndex);\r\n                if(food.count > 0){\r\n                    food.count--\r\n                }\r\n            },\r\n            handleCForMenuList(index){\r\n                const top = this.tops[index];\r\n                this.foodsScroll.scrollTo(0,-top,300)\r\n            },\r\n            _initScroll(){\r\n                this.menuScroll = new BScroll(this.$refs.menuWrap,{\r\n                    click:true\r\n                })\r\n                this.foodsScroll = new BScroll(this.$refs.foodsWrap,{\r\n                    click:true,\r\n                    probeType:3\r\n                })\r\n                this.foodsScroll.on(\"scroll\",({x,y})=>{\r\n                    this.scrollY = Math.abs(y)\r\n                })\r\n            },\r\n            _initTops(){\r\n                let liNodes = this.$refs.foodsList.children;\r\n                let top = 0;\r\n                let tops = [top];\r\n                Array.from(liNodes).forEach((liNode)=>{\r\n                    top += liNode.offsetHeight;\r\n                    tops.push(top)\r\n                })\r\n                this.tops = tops;\r\n            }\r\n        },\r\n        async mounted(){\r\n            const  {errno,body} = await this.$http.goods.getGoods()\r\n            if(errno === OK){\r\n                this.goods = body\r\n            }\r\n            //滑屏\r\n            this._initScroll();\r\n            this.$nextTick(()=>{\r\n                this._initTops()\r\n            })\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"stylus\">\r\n    @import \"../../common/stylus/mixin.styl\"\r\n    .goods\r\n        display flex\r\n        position absolute\r\n        left 0\r\n        right 0\r\n        top 174px\r\n        bottom 48px\r\n        overflow hidden\r\n        .menu-wrap\r\n            flex 0 0 80px\r\n            .menu-list\r\n                .menu-item\r\n                    one-px(rgba(7,17,27,0.1))\r\n                    display flex\r\n                    align-items center\r\n                    justify-content center\r\n                    width 100%\r\n                    height 54px\r\n                    background #f3f5f7\r\n                    &::after\r\n                        width 56px\r\n                    &.active\r\n                        background pink\r\n                    .icon\r\n                        margin-right 2px\r\n                    .text\r\n                        font-size 12px\r\n                        line-height 14px\r\n                        color rgba(7,17,27,1)\r\n        .foods-wrap\r\n            flex 1\r\n            .foods-list\r\n                .foods-item\r\n                    .title\r\n                        height 26px\r\n                        background #f3f5f7\r\n                        font-size 12px\r\n                        line-height 26px\r\n                        color rgba(147,153,159,1)\r\n                        border-left 4px solid #d9dde1\r\n                        padding-left 14px\r\n                    .food-list\r\n                        .food-item\r\n                            position relative\r\n                            one-px(rgba(7,17,27,0.3))\r\n                            padding 18px\r\n                            display flex\r\n                            &::after\r\n                                width 88%\r\n                            &:last-child\r\n                                 border-none()\r\n                            .left\r\n                                flex 0 0 80px\r\n                                margin-right 10px\r\n                                img\r\n                                    width 100%\r\n                                    height 93%\r\n                            .right\r\n                                flex 1\r\n                                .name\r\n                                    font-size 14px\r\n                                    line-height 14px\r\n                                    color rgba(7,17,27,1)\r\n                                    margin-top 2px\r\n                                    margin-bottom 8px\r\n                                .description\r\n                                    font-size 10px\r\n                                    line-height 10px\r\n                                    color rgba(147,153,159,1)\r\n                                .others\r\n                                    font-size 14px\r\n                                    line-height 14px\r\n                                    color rgba(147,153,159,1)\r\n                                    margin-top 8px\r\n                                    margin-bottom 8px\r\n                                .prices\r\n                                    .nowPrice\r\n                                        margin-right 8px\r\n                                        font-size 14px\r\n                                        color rgba(240,20,20,1)\r\n                                        line-height 24px\r\n                                        font-weight 700\r\n                                    .oldPrice\r\n                                        font-size 10px\r\n                                        color rgba(240,20,20,1)\r\n                                        line-height 24px\r\n                                        font-weight 700\r\n                                        text-decoration line-through\r\n\r\n                                .control\r\n                                    position absolute\r\n                                    right 18px\r\n                                    bottom 18px\r\n</style>"],"sourceRoot":"src/pages/ele-goods"}]}